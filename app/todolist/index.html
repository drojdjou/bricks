<!DOCTYPE html>
<html>
<head>
<title>Todolist</title>

<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<meta name="mobile-web-app-capable" content="yes">

<link rel="stylesheet" type="text/css" href="main.css">

</head>
<body>

<section id="template">
	<li></li>
</section>

<section id="new">
</section>

<section id="list">
	<ul>
		<li>One</li>
		<li>Two</li>
		<li>Three</li>
		<li>Four</li>
		<li>Five</li>
	</ul>
</section>

<script type="text/javascript">

	var list = document.querySelector('#list ul');
	var todos = Array.prototype.slice.apply(document.querySelectorAll('#list li'));
	var addnew = document.querySelector('#new');
	var template = document.querySelector('#template li');

	var c = 1;

	var addClick = function(e) {

		var dispose = function() {
			e.parentNode.removeChild(e);
			e.removeEventListener('click', dispose);
			arrange();
		};

		var slideout = function() {
			e.style.webkitTransition = 'all 0.1s ease-out';
			e.style.webkitTransform = 'translateY(' + e.ypos + 'px) translateX(300px)';
			setTimeout(dispose, 100);
		};

		e.addEventListener('click', slideout);
	}

	var arrange = function() {
		var todos = Array.prototype.slice.apply(document.querySelectorAll('#list li'));

		todos.forEach(function(e, i) {
			e.style.webkitTransition = 'all 0.2s ease';
			e.style.webkitTransform = 'translateY(' + (i * 50) + 'px)';
			e.ypos = (i * 50);
		});
	}

	addnew.addEventListener('click', function(e) {
		var n = template.cloneNode(true);
		n.innerHTML = 'new todo ' + c++;
		n.style.backgroundColor = '#fced99';
		setTimeout(function() { n.style.backgroundColor = '#fff'; }, 1);
		list.appendChild(n);
		addClick(n);
		arrange();
	});
	
	todos.forEach(function(e, i) {
		addClick(e);
	});

	arrange();

</script>

<script>
if(location.host.indexOf('localhost') > -1 || location.host.indexOf('192.168') > -1) {
	document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>');
}
</script>

</body>
</head>




















